<button
  type="button"
  id="theme-selector"
  class="flex items-center px-4 py-2 rounded-full border border-gray-300 dark:border-gray-700 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-all"
>
  <svg id="sun-icon" class="w-5 h-5 transition-opacity duration-300 ease-in-out" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
    <path d="M12 3v1m0 16v1m8.66-13.66-.71-.71M4.34 18.34l-.71-.71M21 12h1M2 12H1m16.66 5.66.71.71M4.34 5.66l.71-.71M17 12a5 5 0 11-10 0 5 5 0 0110 0z"></path>
  </svg>
  <svg id="moon-icon" class="w-5 h-5 hidden transition-opacity duration-300 ease-in-out" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
    <path d="M21 12.79A9 9 0 1111.21 3a7 7 0 0010.08 9.79z"></path>
  </svg>
</button>

<script>
  const themeButton = document.getElementById("theme-selector");
  const sunIcon = document.getElementById("sun-icon");
  const moonIcon = document.getElementById("moon-icon");

  if (themeButton && sunIcon && moonIcon) {
    const toggleTheme = () => {
      if (localStorage.theme === "dark") {
        localStorage.theme = "light";
        document.documentElement.classList.remove("dark");
        sunIcon.classList.remove("hidden");
        moonIcon.classList.add("hidden");
      } else {
        localStorage.theme = "dark";
        document.documentElement.classList.add("dark");
        sunIcon.classList.add("hidden");
        moonIcon.classList.remove("hidden");
      }
    };

    // Check the theme on page load
    if (localStorage.theme === "dark" || (!localStorage.theme && window.matchMedia("(prefers-color-scheme: dark)").matches)) {
      document.documentElement.classList.add("dark");
      sunIcon.classList.add("hidden");
      moonIcon.classList.remove("hidden");
    } else {
      sunIcon.classList.remove("hidden");
      moonIcon.classList.add("hidden");
    }

    themeButton.addEventListener("click", toggleTheme);
  }
</script>
